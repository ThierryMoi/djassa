# Djassa Microservices Project ğŸ§©

> **Djassa** est une architecture microservices complÃ¨te construite autour de **FastAPI**, avec une sÃ©curitÃ© gÃ©rÃ©e par **Keycloak**, un maillage de services via **Consul**, et un reverse proxy **Traefik**. Le projet inclut un middleware dâ€™authentification centralisÃ© (`auth-proxy`) et des services modulaires pour l'utilisateur, l'authentification, etc.

---

## ğŸ“¦ Architecture

- **Gateway** : Traefik (reverse proxy)
- **Authentification** : Keycloak + `auth-proxy` (middleware JWT)
- **Service Discovery** : Consul
- **Gestion de secrets** : Vault
- **Microservices** : FastAPI (`users`, `products`, etc.)
- **Communication** : HTTP avec injection des claims via middleware
- **Orchestration** : Docker Compose

---

## ğŸ“ Structure du projet

```

djassa/
â”œâ”€â”€ auth-proxy/         # Middleware dâ€™authentification JWT (FastAPI)
â”œâ”€â”€ users/              # Microservice User
â”œâ”€â”€ traefik/            # Configuration Traefik
â”œâ”€â”€ consul/             # Configuration Consul
â”œâ”€â”€ vault/              # Configuration HashiCorp Vault
â”œâ”€â”€ docker-compose.yml  # Stack complÃ¨te
â””â”€â”€ .env                # Variables dâ€™environnement

````

---

## ğŸš€ Lancer le projet

### PrÃ©requis

- Docker + Docker Compose
- Ports ouverts : `80`, `8500`, `8200`, etc.

### Commandes

```bash
# Cloner le projet
git clone https://github.com/ThierryMoi/djassa.git
cd djassa

# Lancer lâ€™ensemble des services
docker compose up --build
````

ğŸ“ AccÃ¨s utiles :

* Traefik dashboard : [http://localhost:8080](http://localhost:8080)
* Keycloak : [http://localhost:8081](http://localhost:8081)
* Consul : [http://localhost:8500](http://localhost:8500)
* Vault : [http://localhost:8200](http://localhost:8200)

---

## ğŸ” Authentification

* Keycloak gÃ¨re lâ€™Ã©mission des tokens
* `auth-proxy` valide les JWT via la clÃ© publique de Keycloak
* Le middleware redirige vers les services si lâ€™utilisateur est authentifiÃ© et autorisÃ©
* Les claims (`sub`, `roles`, etc.) sont injectÃ©s dans les headers HTTP pour les services en aval

---

## ğŸ§  FonctionnalitÃ©s avancÃ©es

* âœ… Validation locale des tokens JWT
* âœ… Injection des rÃ´les dans les headers
* âœ… Service discovery dynamique via Consul
* âœ… IntÃ©gration possible avec Vault pour les secrets DB
* ğŸ› ï¸ PrÃªt pour extension avec Consul Mesh, OpenTelemetry, etc.

---

## âœ… TODO

* [x] Middleware d'authentification
* [x] IntÃ©gration Keycloak
* [x] Configuration de Consul et Vault
* [ ] IntÃ©gration de Consul Mesh (WIP)
* [ ] CI/CD GitHub Actions
* [ ] ObservabilitÃ© (Prometheus/Grafana)

---

## ğŸ“„ Licence

MIT Â© ThierryMoi
[GitHub Repository](https://github.com/ThierryMoi/djassa)

---

## ğŸ¤ Contributions

Les contributions sont les bienvenues !
Forkez le repo, crÃ©ez une branche, proposez un PR ğŸ§ª
